!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).FloatingUICore={})}(this,(function(e){"use strict";function t(e){return e.split("-")[0]}function n(e){return e.split("-")[1]}function r(e){return["top","bottom"].includes(t(e))?"x":"y"}function o(e){return"y"===e?"height":"width"}function i(e){let{reference:i,floating:a,placement:l}=e;const s=i.x+i.width/2-a.width/2,c=i.y+i.height/2-a.height/2;let f;switch(t(l)){case"top":f={x:s,y:i.y-a.height};break;case"bottom":f={x:s,y:i.y+i.height};break;case"right":f={x:i.x+i.width,y:c};break;case"left":f={x:i.x-a.width,y:c};break;default:f={x:i.x,y:i.y}}const u=r(l),m=o(u);switch(n(l)){case"start":f[u]=f[u]-(i[m]/2-a[m]/2);break;case"end":f[u]=f[u]+(i[m]/2-a[m]/2)}return f}function a(e){return"number"!=typeof e?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(e):{top:e,right:e,bottom:e,left:e}}function l(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}async function s(e,t){void 0===t&&(t={});const{x:n,y:r,platform:o,rects:i,elements:s,strategy:c}=e,{boundary:f="clippingParents",rootBoundary:u="viewport",elementContext:m="floating",altBoundary:d=!1,padding:p=0}=t,y=a(p),g=s[d?"floating"===m?"reference":"floating":m],h=await o.getClippingClientRect({element:await o.isElement(g)?g:g.contextElement||await o.getDocumentElement({element:s.floating}),boundary:f,rootBoundary:u}),x=l(await o.convertOffsetParentRelativeRectToViewportRelativeRect({rect:"floating"===m?{...i.floating,x:n,y:r}:i.reference,offsetParent:await o.getOffsetParent({element:s.floating}),strategy:c}));return{top:h.top-x.top+y.top,bottom:x.bottom-h.bottom+y.bottom,left:h.left-x.left+y.left,right:x.right-h.right+y.right}}function c(e,t,n){return Math.max(e,Math.min(t,n))}const f={left:"right",right:"left",bottom:"top",top:"bottom"};function u(e){return e.replace(/left|right|bottom|top/g,(e=>f[e]))}function m(e,t){const i="start"===n(e),a=r(e),l=o(a);let s="x"===a?i?"right":"left":i?"bottom":"top";return t.reference[l]>t.floating[l]&&(s=u(s)),{main:s,cross:u(s)}}const d={start:"end",end:"start"};function p(e){return e.replace(/start|end/g,(e=>d[e]))}const y=["top","right","bottom","left"],g=y.reduce(((e,t)=>e.concat(t,t+"-start",t+"-end")),[]);function h(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function x(e){return y.some((t=>e[t]>=0))}function w(e){return"x"===e?"y":"x"}e.arrow=e=>({name:"arrow",async fn(n){const{element:i,padding:l=0}=null!=e?e:{},{x:s,y:f,placement:u,rects:m,platform:d}=n;if(null==i)return{};const p=a(l),y={x:s,y:f},g=r(t(u)),h=o(g),x=await d.getDimensions({element:i}),w="y"===g?"top":"left",b="y"===g?"bottom":"right",v=m.reference[h]+m.reference[g]-y[g]-m.floating[h],A=y[g]-m.reference[g],P=await d.getOffsetParent({element:i}),k=P?"y"===g?P.clientHeight||0:P.clientWidth||0:0,D=v/2-A/2,O=p[w],R=k-x[h]-p[b],C=k/2-x[h]/2+D,E=c(O,C,R);return{data:{[g]:E,centerOffset:C-E}}}}),e.autoPlacement=function(e){return void 0===e&&(e={}),{name:"autoPlacement",async fn(r){var o,i,a,l,c,f;const{x:u,y:d,rects:y,middlewareData:h,placement:x}=r,{alignment:w=null,crossAxis:b=!1,allowedPlacements:v=g,autoAlignment:A=!0,...P}=e;if(null!=(o=h.autoPlacement)&&o.skip)return{};const k=function(e,r,o){return o.filter((o=>e?n(o)===e||!!r&&p(o)!==o:t(o)===o))}(w,A,v),D=await s(r,P),O=null!=(i=null==(a=h.autoPlacement)?void 0:a.index)?i:0,R=k[O],{main:C,cross:E}=m(R,y);if(x!==R)return{x:u,y:d,reset:{placement:k[0]}};const B=[D[t(R)],D[C],D[E]],T=[...null!=(l=null==(c=h.autoPlacement)?void 0:c.overflows)?l:[],{placement:R,overflows:B}],j=k[O+1];if(j)return{data:{index:O+1,overflows:T},reset:{placement:j}};const z=T.slice().sort(b||A&&n(x)?(e,t)=>e.overflows.reduce(((e,t)=>e+t),0)-t.overflows.reduce(((e,t)=>e+t),0):(e,t)=>e.overflows[0]-t.overflows[0]),F=null==(f=z.find((e=>{let{overflows:t}=e;return t.every((e=>e<=0))})))?void 0:f.placement;return{data:{skip:!0},reset:{placement:null!=F?F:z[0].placement}}}}},e.computePosition=async(e,t,n)=>{const{placement:r="bottom",strategy:o="absolute",middleware:a=[],platform:l}=n;let s=await l.getElementRects({reference:e,floating:t,strategy:o}),{x:c,y:f}=i({...s,placement:r}),u=r,m={};for(let n=0;n<a.length;n++){const{name:d,fn:p}=a[n],{x:y,y:g,data:h,reset:x}=await p({x:c,y:f,initialPlacement:r,placement:u,strategy:o,middlewareData:m,rects:s,platform:l,elements:{reference:e,floating:t}});c=null!=y?y:c,f=null!=g?g:f,m={...m,[d]:null!=h?h:{}},x&&("object"==typeof x&&x.placement&&(u=x.placement),s=await l.getElementRects({reference:e,floating:t,strategy:o}),({x:c,y:f}=i({...s,placement:u})),n=-1)}return{x:c,y:f,placement:u,strategy:o,middlewareData:m}},e.detectOverflow=s,e.flip=function(e){return void 0===e&&(e={}),{name:"flip",async fn(n){var r,o;const{placement:i,middlewareData:a,rects:l,initialPlacement:c}=n;if(null!=(r=a.flip)&&r.skip)return{};const{mainAxis:f=!0,crossAxis:d=!0,fallbackPlacements:y,fallbackStrategy:g="bestFit",flipAlignment:h=!0,...x}=e,w=t(i),b=y||(w===c||!h?[u(c)]:function(e){const t=u(e);return[p(e),t,p(t)]}(c)),v=[c,...b],A=await s(n,x),P=[];let k=(null==(o=a.flip)?void 0:o.overflows)||[];if(f&&P.push(A[w]),d){const{main:e,cross:t}=m(i,l);P.push(A[e],A[t])}if(k=[...k,{placement:i,overflows:P}],!P.every((e=>e<=0))){var D,O;const e=(null!=(D=null==(O=a.flip)?void 0:O.index)?D:0)+1,t=v[e];if(t)return{data:{index:e,overflows:k},reset:{placement:t}};let n="bottom";switch(g){case"bestFit":{var R;const e=null==(R=k.slice().sort(((e,t)=>e.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)-t.overflows.filter((e=>e>0)).reduce(((e,t)=>e+t),0)))[0])?void 0:R.placement;e&&(n=e);break}case"initialPlacement":n=c}return{data:{skip:!0},reset:{placement:n}}}return{}}}},e.hide=()=>({name:"hide",async fn(e){const t=await s(e,{elementContext:"reference"}),n=await s(e,{altBoundary:!0}),r=h(t,e.rects.reference),o=h(n,e.rects.floating);return{data:{referenceHidden:x(r),referenceHiddenOffsets:r,escaped:x(o),escapedOffsets:o}}}}),e.limitShift=function(e){return void 0===e&&(e={}),n=>{const{x:o,y:i,placement:a,rects:l,middlewareData:s}=n,{offset:c=0,mainAxis:f=!0,crossAxis:u=!0}=e,m={x:o,y:i},d=r(t(a)),p=w(d);let y=m[d],g=m[p];const h="function"==typeof c?c({...l,placement:a}):c,x="number"==typeof h?{mainAxis:h,crossAxis:0}:{mainAxis:0,crossAxis:0,...h};if(f){const e="y"===d?"height":"width",t=l.reference[d]-l.floating[e]+x.mainAxis,n=l.reference[d]+l.reference[e]-x.mainAxis;y<t?y=t:y>n&&(y=n)}if(u){var b,v,A,P;const e="y"===d?"width":"height",t=l.reference[p]-l.floating[e]-(null!=(b=null==(v=s.offset)?void 0:v[d])?b:0)+x.crossAxis,n=l.reference[p]+l.reference[e]+(null!=(A=null==(P=s.offset)?void 0:P[d])?A:0)+x.crossAxis;g<t?g=t:g>n&&(g=n)}return{[d]:y,[p]:g}}},e.offset=function(e){return void 0===e&&(e=0),{name:"offset",fn(n){const{x:o,y:i,placement:a,rects:l}=n,s=function(e){let{placement:n,rects:o,value:i}=e;const a=t(n),l=["left","top"].includes(a)?-1:1,s="function"==typeof i?i({...o,placement:n}):i,{mainAxis:c,crossAxis:f}="number"==typeof s?{mainAxis:s,crossAxis:0}:{mainAxis:0,crossAxis:0,...s};return"x"===r(a)?{x:f,y:c*l}:{x:c*l,y:f}}({placement:a,rects:l,value:e});return{x:o+s.x,y:i+s.y,data:s}}}},e.rectToClientRect=l,e.shift=function(e){return void 0===e&&(e={}),{name:"shift",async fn(n){const{x:o,y:i,placement:a}=n,{mainAxis:l=!0,crossAxis:f=!1,limiter:u=(e=>{let{x:t,y:n}=e;return{x:t,y:n}}),...m}=e,d={x:o,y:i},p=await s(n,m),y=r(t(a)),g=w(y);let h=d[y],x=d[g];if(l){const e="y"===y?"bottom":"right";h=c(h+p["y"===y?"top":"left"],h,h-p[e])}if(f){const e="y"===g?"bottom":"right";x=c(x+p["y"===g?"top":"left"],x,x-p[e])}return u({...n,[y]:h,[g]:x})}}},e.size=function(e){return void 0===e&&(e={}),{name:"size",async fn(r){var o;const{placement:i,rects:a,middlewareData:l}=r,{apply:c,...f}=e,u=await s(r,f),m=t(i),d="end"===n(i);let p,y;"top"===m||"bottom"===m?(p=m,y=d?"left":"right"):(y=m,p=d?"top":"bottom");const g={height:a.floating.height-u[p],width:a.floating.width-u[y]};return null!=(o=l.size)&&o.skip?{}:(null==c||c({...g,...a}),{data:{skip:!0},reset:!0})}}},Object.defineProperty(e,"__esModule",{value:!0})}));